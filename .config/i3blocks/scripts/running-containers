#!/usr/bin/env python3

import shutil
import subprocess

def count_containers(command):
    try:
        result = subprocess.run(
            [command, "ps", "-q"],
            stdout=subprocess.PIPE,
            stderr=subprocess.DEVNULL,
            text=True,
            check=False,
        )
        return len(result.stdout.strip().splitlines()) if result.stdout else 0
    except Exception:
        return 0


docker_active = count_containers("docker") if shutil.which("docker") else 0
podman_active = count_containers("podman") if shutil.which("podman") else 0

output_parts = []
if docker_active > 0:
    output_parts.append(f" [{docker_active}]")
if podman_active > 0:
    output_parts.append(f" [{podman_active}]")

if output_parts:
    print(" ".join(output_parts))
